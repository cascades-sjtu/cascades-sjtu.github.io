---
title: 2023 暑期实习投递/面试记录
category: [Misc, Internship]
tags: [program analysis, c/c++]
---

> 虽然之后准备读博士，但还是想体验一下程序分析的工业界情况（尤其是大厂）。实则能够提高码力，拓宽人脉，虚则能够美化简历，为自己的未来托个底。

从 3 月 10 日到 3 月 31 日，凭借之前通过各种活动/机会/微信群认识的 HR/业内大佬，我有选择性地先后投递了 x 家公司，~~没有错过金三银四的时机~~。为了从这些面试中吸取一些教训，也方便我之后跟进面试流程，选择 offer，我打算把它们记录下来。

以下的职位按照时间顺序记录：

## 上海安势信息科技有限公司

- 消息来源：静态程序分析技术交流群
- 时间跨度：3.10 - 3.22
- 目前进度：没发 offer

虽说是技术交流群，但里面竟然埋伏了不少 HR。不得不吐槽的是，这个公司发 JD 的时候都不说自己是什么公司，还是我靠邮箱后缀名找到的；还总是弄错我的姓氏，让我不得不在英文简历中加上中文名。

笔试是做 4 道 C++ 题目，2 小时完成。一开始我还以为会出一些程序分析场景相关的题目，结果看到题目发现就是非常简单的那种。不过最后电脑没电了，所以只做出来 3 道，也过了。

面试是公司技术负责人，C++开发部门负责人和一个高管一起面试，一共 2 小时。一上来，部门负责人（估计可能是未来的 mentor）先问了一些 C/C++ 和系统的知识，后面才知道这些都在面经上面有答案：

1. static 关键字的应用场景和作用？
2. 拷贝构造函数常见发生的场景？
3. 宏和内联函数的异同？
4. CPU 缓存中使用的是物理内存还是虚拟内存？

虽然没有背过面经，但我基本也都回答上来了，只是每个问题都需要反复地和面试官确认一些细节，不能像背答案一样回答得详细，完整又流畅。**然后才是最难的部分**，公司技术负责人张博士开始问我项目经历，并结合公司业务场景给出了一些静态分析的技术问题。项目经历方面：

1. 在蜚语实习的进度安排，一共写了几个 checker，它们的作用都是什么？代码量多少？能不能介绍其中一个 checker 的实现？
2. 在期智实习的工作结果？~~似乎没有什么，只敢说自己学习了 clang-tidy，所以很尴尬~~

技术方面：

1. 介绍一下编译器的工作流程？越详细越好
2. 介绍一下符号执行出现路径爆炸问题时的几种方案？
3. Clang 的 解析树（Parse Tree）知道吗？~~这玩意儿和 AST 不一样，我都没听说过~~
4. 介绍一下一个 LLVM IR Module 的组成部分？面试官说这是最基础的 LLVM 问题

业务方面：

1. 如何将在一个环境下能够成功编译的源代码和其包含的头文件，自动地移植到另一个环境中？除了使用 Docker 这样的方案
2. 静态分析时会引入大量头文件的代码，如何做到只分析源文件的代码？
3. 做上下文敏感分析和过程间分析时，需要将函数调用图和控制流图结合（笛卡尔积）起来，如何减少这一过程的内存占用？可以使用按需结合的方式

期间，还扯到了一些闲话。毕竟国内静态分析的圈子还比较小，做产品的公司目前都还处于融资 1-2 轮的阶段，这些公司的创始人之间几乎都认识。然后，另一位高管问了我之后的发展方向，说我如果要选择读博就得早做准备。张博士也送了我一句话：想要什么的人不是厉害的，不想要什么的人才厉害。其实这时候已经预感到面试会挂了。

最后，我问公司了公司两个问题：

1. 为什么从 SCA 转到 SAST？SCA 是主要产品，SAST 也在做
2. 为什么不考虑给 CSA 提 PR？公司不稀罕开源贡献，CSA 官方的代码不是工业级别的

总的来说，这次面试还是很有收获的，~~尤其是四个人同时面一个人，算是把压力测试和 HR 面也经历了~~。但毕竟小公司有自己的考量，而且这个社招岗位本来就是只招 1-2 个即战力，需要长时间（大于 3 个月）在岗的。过两天后，公司还是很友好地说明了不给 offer 的原因，我也加到了技术大佬张博士的微信，感觉不算亏。

## 上海那一科技有限公司（NaiveSystems）

- 消息来源：公众号 / 公司创始人微信 / 朋友圈推荐
- 时间跨度：3.31 - 至今
- 目前进度：完成一面
- https://mp.weixin.qq.com/s/dUWnLraHJqALuJqRLJa4xw

考虑那一主要是因为~~它离学校近~~从之前它们的实习生总结看来，在这里可以学到不少技术，而且带有一些学术性质，所以应该也可以和贾老板聊很多出国读博的事情。它们之前的产品也是基于 CSA 开发的静态分析工具，我还是比较有信心。

首先是做了一个离线的笔试，还比较考验综合水平，我也挺喜欢这样的笔试形式的。笔试给定了一个小项目，要求完成 4 个 commit，最终完成的结果打包为 [git bundle](https://cascades-sjtu.github.io/assets/attachments/submission.bundle)：

1. 编写构建文件，使项目以及第三方库能够顺利编译
2. 根据文档，完成功能函数，通过给定的测试用例
3. 自己添加测试用例，注意 corner case
4. 发现初始代码中一个内存相关的 bug

花了 2 小时完成，不过也要吐槽一下它的自动判断脚本。它说可以支持 Mac 下开发，但自动脚本出现了头文件的报错，后续移植到 Linux 下才通过。

过了一个星期收到了一面通知，由于就在零号湾，我是直接前往线下面试的。刚进办公室就感受到贾老板强大的气场和简单高效的沟通方式。不同于之前介绍简历时大说特说，这次我几乎只花了 3 分钟就过了一遍简历，然后就开始了三道现场代码题。在手写白板代码（听说是 Google 企业文化）的过程中，贾老板会跟进提问，引导你回答，并设想代码可能出现的问题。

1. 写一个间隔删除链表节点的函数，直接使用双指针的思路即可。随后问如何测试，即需要测试链表长度为 0，1，2 时的情况，还有超长链表的性能情况
2. 写一个会导致死锁的程序。这个我回答得不太好：首先自己定义锁变量和 P/V 操作，随后我使用了书上的两个程序死锁的场景，但如何同时运行这两个程序，造成死锁也是个问题
3. 写一个有栈溢出的程序。我随手写了 scanf 和 strcpy 的两个版本，但似乎都不太满足他的要求。随后老板又把题目改成如何判断栈的增长顺序，我首先是使用局部变量的位置判断。结果老板说可能在编译器优化后局部变量会调换顺序。随后我又考虑使用栈帧的增长来判断，但也有可能 callee 被内联后再次发生局部变量优化的情况。总之最好的方法还是直接使用内联汇编。

整个面试花了将近 1 个小时，还是比较有收获的。其实白板写代码，也在考验我解决问题的思路，模拟了之后和同事讨论问题的场景。很多时候我还是有点草率了，在自己还没有把问题想清楚之前就想直接和对方交流，导致沟通效率不高。其次是我写代码的熟练度还是不够，贾老板问了和安势一样的问题：一周能写多少个 checker？我都只能支支吾吾地说 3-4 个，但从对方的反映看来，还是太少了，根本不符合公司快速迭代的要求。

最后我还问了一些关于公司的问题。比如为什么使用 MISRA C/C++ 规则，结果回答是客户（金主爸爸）要求。还有之前的科研 idea，是涉及到编译器的 annotation 辅助静态分析的，感觉这一块儿我可以再好好了解了解，看看现代编译器到底有多么智能。

## 腾讯安全云鼎实验室

- 消息来源：SIG-程序分析
- 时间跨度：3.31 - 3.31
- 目前进度：简单沟通，估计没戏

也是群里发的广告，我就加微信了。值得吐槽的是我催了两次才有了电话面试的机会。其实也说不上面试，就是简单聊了 30 分钟。他问了我项目上的一些问题，尤其问了我对于 ChatGPT 挖漏洞的看法，是否能够取代传统的逻辑推理的方法。一个有意思的想法是，虽然 LLM 本质上是概率统计的模型，但有没有可能在 LLM 的涌现能力的驱动下，它也具备了逻辑能力。也就是说 ChatGPT 并不是像编译器一样去认识代码，而是像人脑神经元开发编译器的过程一样认识代码。我觉得这个想法很恐怖，也很符合我对 AI 的认识。

了解到他们目前用的比较多的工具是 CodeQL，之后想做一些用 LLM 做代码分析的尝试，然后可能更倾向于有深度学习背景的同学。然后说如果日常实习，名额还是比较多的。

## 阿里云安全 Web 组

- 消息来源：xdd
- 时间跨度：3.30 - 至今
- 目前进度：等待面试
- https://talent.alibaba.com/personal/campus-application

打 XCTF Finals 的最后一晚上，听 xdd 介绍了阿里云安全内部的一些业务情况。当问到我的方向时，他就推了这个岗位。虽然是做 Web 侧（Java，Go）的代码扫描，但如果能学到技术，而且可以和这么多 0ops 的学长混，感觉也是很好的。



## 阿里云智能物联网安全组

- 消息来源：官网投递
- 时间跨度：3.30 - 4.11
- 目前进度：一面挂了
- https://talent.alibaba.com/personal/campus-application

自己在官网投递的被分配到了阿里云智能的物联网安全部，安排了带有笔试的一面。这个面试完全就是走过场，面试官态度很差。首先是约好的 3 点，结果 3 点才发链接，自己 3:10 才进入会议室，然后丢下题目就跑了。四个题目也没什么价值，甚至感觉都没想让我好好回答：

1. 描述 Java ReadObject 中的可能发生的漏洞及其原理，如何在没有回显的情况下判断是否存在？反序列化漏洞
2. 写一个大整数加法的函数，输入位两个字符数组，需要判断进位。
3. 用 python 实现全站数据爬取并打包上传。requests 和 bs4 库的利用
4. 用 shell 运行程序 100 次并将结果按序输出。`sort -rn`

简单地写完题目之后，又说开始电话面试。问了我对于漏洞挖掘的一些了解，尤其是之前的那个 CVE 的流程，还问我做过那些印象深刻的 CTF 二进制题目，还问了一些 web 防火墙的问题。最后谈到这个部门想要实习生做一些运维审计的工作，问我感不感兴趣。最后又问了一些无聊的面经，然后就结束了。一共 2 个小时，感觉毫无收获。后面才知道这一类就是 KPI 面，不必太过认真了。

## 阿里云安全系统安全组

- 消息来源：捞人
- 时间跨度：4.14 - 至今
- 目前进度：简单聊了

阿里的两个流程走完之后，阿里云安全的人直接通过简历联系到我了，说是之后用钉钉联系。但目前我在系统中被另一个部门捞起来了，所以暂时不能被他们把简历调过去。

## 腾讯 QQ 客户端安全

- 消息来源：官网投递
- 时间跨度：3.26 - 至今
- 目前进度：完成二面
- https://join.qq.com/progress.html

在官网随意投的，本来不抱希望，以为就是纯刷经验。面试之前了解了一下，大概和游戏安全差不多，都是偏重逆向。~~可惜没有仔细看看面经了~~

面试一开始就问了很多安全的问题：

1. 熟悉哪些混淆方式？ollvm 说一遍
2. 熟悉哪些指令集架构？ARM 和 X86 有什么不同？
3. 介绍一下 x86 函数调用的过程？
4. 对于 VMP 熟悉吗？介绍一下自己做过的逆向题
5. 介绍一下污点分析的流程？

回答得比较磕磕绊绊，主要还是因为自己平常做的逆向题太少了。企业面对的安全攻击，对抗强度是很大的，所以这样的岗位也会比较累。

然后换到另一个人，他说他们最近有用 LLVM 进行安全加固的项目，也会和科恩有交流。这一块儿我比较感兴趣，也和他聊得比较好。这才把面试流程推进下去。唯一不足的是这个岗位在深圳总部。

之后也看了看腾讯的[游戏安全技术竞赛](https://gslab.qq.com/html/competition/2022/index.htm)，有空可以尝试做一下。

收到二面通知了，估计还是问计算机原理相关的问题，听说会问一些网安业界的动态。

二面其实并没有问任何面经，但给我也带来了小小的一点震撼。有两个面试官，首先就是问到了你的代表作是什么，把你最拿得出手的东西讲一下？这让我瞬间不知道该说啥，只好说自己做的太杂了。面试官还说到，之前做的静态代码分析，其实都不算安全的问题，你有没有实际地自动化地分析过一些安全问题？我表示自己也只是做过题目，并没有挖过真实的漏洞或者是复现。总之，说明自己还是要提高安全实战技能，就算是企业用来提供安全能力的部门（比如静态分析，安全加固）也需要懂得攻击。最后，还问了我开发大型软件（而不是写插件）的经历，我把之前做过的 nand2tetris 完整地讲了一遍。不过面试官问到我自己在中间语言层有没有什么优化，我回答的还是栈式虚拟机加法到底层指令的优化。感觉自己在做这些 lab 的同时，也需要有自己的思考。而且不能总之拘泥于 lab，而是要往真实世界的大型代码看齐。

当然二面还问了许多技术无关的问题，比如自己期待的工作地点，工作部门（中台），实习时长等等。整个面试大约 40 分钟，感觉不算顺利。

## 华为云核心网产品线

- 消息来源：HR 微信
- 时间跨度：4.3 - 至今
- 目前进度：准备笔试
- https://career.huawei.com/reccampportal/portal5/user-index.html

~~华为 HR 真多~~，先后和无线网络产品线和云核产品线，一共 4 个 HR 联系过。虽然无线网络产品是华为的老本行，待遇更好。但我是奔着技术去的，还是觉得云核更合适一些。

和云核的白盒分析团队的聊了，他们也是主要做自动化安全能力，目前用到了 clang-tidy 和其他一些自研工具。

[华为的笔试形式](https://mp.weixin.qq.com/s/nK7Y7Gz_SPaoa1aKLiopTA)是根据职位来定的，通用软件开发对应编程题，而网络安全对应选择题。稳妥起见，还是做选择题好了。今年换了笔试的系统，所以进度慢一点，不过华为这边都会派 HR 跟进每个人的进度。

## 字节跳动无恒实验室

- 消息来源：jd 学长
- 没有 HC

## 蚂蚁集团 CTO 线基础安全部

- 消息来源：官网投递
- 时间跨度：3.26 - 至今
- 目前进度：一志愿简历挂，二志愿通过简历
- https://talent.antgroup.com/personal/campus-application

一志愿是[天穹实验室](https://github.com/antgroup-arclab)，专门挖漏洞的，自己这方面的背景还是不够硬。

二志愿分配到了 CTO 线的基础安全部，进行了 1 个小时的简单电话面试，主要是聊一聊，没有问面经。

首先还是介绍了自己关于程序分析的两个项目，面试官对于 CSA 内存建模以及 use-after-move 的检测方式都表示很感兴趣。随后就开始聊一些程序分析工程实现上的问题，比如在遇到大规模代码时内存建模非常消耗资源，这时候可以采用反向数据流分析的方式，来追溯缓冲区的长度，目前最出色的商业静态分析工具 coverity 已经实现了这样的功能，但有时候误报也很高。看来我还是要更熟悉 CSA 的检测机制，把一个静态分析模型吃透。

终于面试官提到了他们部门的工作，是对接自研数据库 oceanbase 的业务安全，负责分析 C++ 代码并将问题反馈给对应的开发者，不需要写利用。这个部门分析主要依赖的是 coverity，感觉如果有接触商业工具的机会也不错。我顺便问了问为什么不像 PingCAP 一样使用内存安全的 Rust，结果面试官说那边照样有很多 unsafe 导致的问题。

随后聊到了该部门 fuzz 相关的工作，类似于 squirrel 这篇论文，目前主流的针对数据库 fuzz 的方式就是需要自己定义一套 SQL 语句的中间语言，实现对应的前端，并在此之上做变异。首先，面试官要我描述自己涉及一个 IR 的过程。虽然不了解 SQL 引擎的实现，但我就按照 LLVM IR 的设计逻辑来答了。然后，面试官问我有没有写过 bison，我表示自己玩过 antlr4，感觉功能差不多。面试官还问了自己有没有上手修改过 AFL 源码，我说没有，之后他也没继续问下去了。

最后我问了几个问题，比如 oceanbase 使用的 C++ 开发风格（C++11，少量 C++14，自己实现 STL）。总体感觉是负责业务安全的部门，面试官也是像办法采用各种安全手段来保障。而且如果可以和开发者对接的话，应该是可以提高很多开发经验的。
